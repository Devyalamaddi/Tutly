---
import RootLayout from "@/layouts/RootLayout.astro";
import NoDataFound from "@/components/NoDataFound";
import { actions } from "astro:actions";

const call = Astro.callAction;
const { data } = await call(actions.courses_getEnrolledCourses, {});
const courses = data?.data;

const firstCourseId = courses?.[0]?.id;

if (!firstCourseId) {
  return Astro.redirect("/instructor/no-courses", 302);
}

return Astro.redirect(`/instructor/report/${firstCourseId}`, 302);
---

<RootLayout title="Report">
  {!firstCourseId && <NoDataFound message="Oops! No enrolled courses found" />}
</RootLayout>
